#!/bin/bash
# rootpassword â€“ change root password (menu option [16] ROOT PASSWORD).

# Load color helpers (install path vs dev path)
if [[ -f /etc/SSHPlus/colors ]]; then
	source /etc/SSHPlus/colors
elif [[ -f /bin/colors ]]; then
	source /bin/colors
elif [[ -f "$(dirname "$0")/colors" ]]; then
	source "$(dirname "$0")/colors"
fi

print_header "         CHANGE ROOT PASSWORD           "
echo ""
color_echo_n "Enter new root password: " "yellow"
read -r -s new_pass
echo ""
color_echo_n "Confirm new root password: " "yellow"
read -r -s confirm_pass
echo ""

if [[ -z "$new_pass" ]]; then
	error_msg "Password cannot be empty!"
	sleep 2
	exit 1
fi
if [[ "$new_pass" != "$confirm_pass" ]]; then
	error_msg "Passwords do not match!"
	sleep 2
	exit 1
fi
if [[ ${#new_pass} -lt 4 ]]; then
	error_msg "Password must be at least 4 characters!"
	sleep 2
	exit 1
fi

echo "root:$new_pass" | chpasswd
success_msg "Root password changed successfully!"
sleep 2
